<!-- تعديل خدمة و قالب EmailJS -->
<script type="text/javascript">
    (function(){
        emailjs.init("tVG2CqDf2zogDlDf1");  // استبدل بالمفتاح العام الخاص بك
    })();
</script>

<!-- بقية الكود يبقى كما هو -->
<script>
    document.getElementById('signupForm').addEventListener('submit', function(event) {
        event.preventDefault();
        
        const username = document.getElementById('username').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value.trim();
        const errorMessage = document.getElementById('errorMessage');
        const successMessage = document.getElementById('successMessage');
        
        // تحقق من تنسيق البريد الإلكتروني
        const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
        if (!email || !emailRegex.test(email)) {
            errorMessage.textContent = '❌ البريد الإلكتروني غير صالح.';
            successMessage.textContent = '';
            return;
        }

        if (!password) {
            errorMessage.textContent = '❌ كلمة المرور غير صحيحة.';
            successMessage.textContent = '';
            return;
        }

        // إعداد البيانات المرسلة
        const templateParams = {
            user_name: username,
            user_email: email,
            login_link: 'https://yourdomain.com/login.html'  // استبدل بهذا الرابط الفعلي
        };

        // إرسال البريد عبر EmailJS
        emailjs.send('service_1v736jk', 'template_vfwn3na', templateParams)
            .then(function(response) {
                console.log('Success:', response);
                successMessage.textContent = '✅ تم تسجيل الحساب بنجاح! تحقق من بريدك الإلكتروني.';
                errorMessage.textContent = '';
                setTimeout(() => {
                    window.location.href = 'activate.html'; // توجيه المستخدم إلى صفحة التفعيل
                }, 2000);
            }, function(error) {
                console.error('Error:', error);
                errorMessage.textContent = '❌ فشل إرسال البريد الإلكتروني. الخطأ: ' + error.text;
                successMessage.textContent = '';
            });
    });
</script>
